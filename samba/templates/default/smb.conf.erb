# This is the main Samba configuration file.
#
# It was dynamically generated by Chef on <%= node["fqdn"] %>
#
# Local modifications will be overwritten by Chef.
#

[global]
  workgroup = <%= node["samba"]["workgroup"] %>
  server string = <%= node["samba"]["server_string"] %>
  security = <%= node["samba"]["security"] %>
  interfaces = <%= node["samba"]["interfaces"] %>
  hosts allow = <%= node["samba"]["hosts_allow"] %>
  load printers = <%= node["samba"]["load_printers"] %>
  passdb backend = <%= node["samba"]["passdb_backend"] %>
  dns proxy = <%= node["samba"]["dns_proxy"] %>
	<% if node["samba_group"] -%>
  <% node["samba_group"].each do |o,v| -%>
  <%= o %> = <%= v.respond_to?(:join) ? v.join(',') : v %>
  <% end -%>
	<% end -%>
	<% if node["smbusermap"] -%>
  username map = <%= node["smbusermap"]["mapfile"] %>
	<% end -%>

#============================ Share Definitions ==============================
<% @shares.each do |share,option| -%>
[<%= share %>]
  <% option.each do |o,v| -%>
  <%= o %> = <%= v.respond_to?(:join) ? v.join(',') : v %>
  <% end -%>

<% end -%>
